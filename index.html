<!DOCTYPE html>
<html>
  <head>
    <title>Beer League Baseball Challenge</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">

<style>

body {
  background-color: #b4b4b4;
}
.box {
  text-align: center;
}

caption {
  font-size: 20pt;
  font-weight: bold;
  color : #0033cc;
  padding-top: 10px;
  padding-bottom: 20px;
}

th {
 font-style: italic;
}

</style>
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="backlift-reloader.js"></script>
<script type="text/javascript">
var wins=0;
var losses=0;
var totalGames=(+wins) + (+losses);
var percentage= ((+wins)/(+totalGames)).toFixed(2)* 100 + "%";


$(document).ready(function(){ 
  cleardata();
  populateTable();
  $('#SaveChanges').click(function(){ 
    var teamName= $('#TeamName').val();
    var teams={
      name: teamName,
      manager: $('#ManagerName').val(),
      phone: $('#TelNumber').val(),
      sponsor: $('#Sponsor').val(),
      zip: $('#Zip').val()
    };
  addTable(teamName);
  postLeague(team);
  $('#application')[0].reset();
  });  //end click event


  function addTable(data){  //append team name to table
     $('#standings').find('tbody')
  .append('<tr><td><a id='+ data +'>'+ data +'</a></td><td>'+ wins +'</td><td>'+ losses +'</td><td>'+ percentage +'</td></tr>');
  };  //end addTable function


  function postLeague(info){  //post Leagueinfo to JSON file
    $.ajax({
 type: "POST",
 url: "backliftapp/team",
 data: info,
 success: function (data) {
   console.log(data);
 },
 dataType: "json"
});
  }; //end postLeague function

  function populateTable(){
    $.ajax({
      type: "GET",
      url: "backliftapp/team",
      success: function(teams){
        $(teams).each(function(){
       $('#standings').find('tbody')
  .append('<tr><td><a id='+ teams.name +'>'+ teams.name +'</a></td><td>'+ wins +'</td><td>'+ losses +'</td><td>'+ percentage +'</td></tr>');
     });
     
    },
        dataType: "json"
    })
  };
  function cleardata(teams){
    $.ajax({
    type: "DELETE",
    url: "/backliftapp/team" + teams.id, 
    success: function(result) { 
        console.log("Deleted!");
    } 
});
  }

})

</script>
</head>

<body>
  <div class"container">
    <div class="row box">
          <div class="span12"><img src="img/images.jpg" class="img-rounded">
            <h2>Beer and Veggie Dogs? League</h2>
           <table class="table table-bordered" id="standings">
             <caption>Standings</caption> 
              <thead>
                <tr>
                  <th>Team</th>
                  <th>Win</th>
                  <th>Loss</th>
                  <th>Percentage % </th>
                </tr>
             </thead>
               <tbody>
               </tbody>
          </table>
                <!-- Button to trigger modal -->
            <button type="button" href="#myModal" role="button" class="btn btn-primary" data-toggle="modal">Add a Team</button>
               <!-- Modal -->
  <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-header">
                   <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                   <h3 id="myModalLabel">Enter Team Information</h3>
               </div>

      <div class="modal-body">
                <!-- Form -->
        <form class="form-horizontal" id="application">
             <div class="control-group">
                 <label class="control-label" for="TeamName">Team Name</label>
             <div class="controls">
                <input type="text" name="teamname" id="TeamName">
             </div>
           </div>
            
           <div class="control-group">
               <label class="control-label" for="ManagerName">Manager Name</label>
              <div class="controls">
                <input type="text" name="managername" id="ManagerName">
              </div>
           </div>
  
           <div class="control-group">
                 <label class="control-label" for="TelNumber">Phone No.</label>
             <div class="controls">
                <input type="tel" name="telnumber" id="TelNumber">
             </div>
           </div>

           <div class="control-group">
                 <label class="control-label" for="Sponsor">Sponsor Name</label>
             <div class="controls">
                <input type="text" name="sponsor" id="Sponsor">
             </div>
           </div>

           <div class="control-group">
                 <label class="control-label" for="Zip">Zip Code</label>
             <div class="controls">
                <input type="number" name="zip" id="Zip">
             </div>
           </div>
        </form>
      </div>

            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                <button class="btn btn-primary" aria-hidden="true" data-dismiss="modal" id="SaveChanges">Save Changes</button>
            </div>
  </div> <!-- End Modal --> 
           <a href="#" class="btn" id="Update">Update Results</a>
           <!-- <a id="element" href="#" data-toggle="tooltip" data-placement="top" title="Tooltip on top">Tooltip on top</a> -->
  </div> <!-- span12 -->
             
  

  </div> <!-- End row box -->
               

</div> <!--End container -->
</body>
</html>